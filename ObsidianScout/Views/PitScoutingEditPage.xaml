<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
   xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
       x:Class="ObsidianScout.Views.PitScoutingEditPage"
      xmlns:vm="clr-namespace:ObsidianScout.ViewModels"
             x:DataType="vm:PitScoutingEditViewModel"
   Title="Edit Pit Scouting"
           Style="{StaticResource LiquidGlassPage}">
    
 <ContentPage.Resources>
        <ResourceDictionary>
   <!-- Status message colors -->
   <Color x:Key="SuccessColor">#4CAF50</Color>
     <Color x:Key="ErrorColor">#F44336</Color>
  </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowDefinitions="Auto,*,Auto" Padding="16">
     <!-- Header -->
 <VerticalStackLayout Grid.Row="0" Spacing="8">
      <Label Text="{Binding PitEntry.TeamName, StringFormat='Team {0}'}" 
 FontSize="24"
   FontAttributes="Bold"
    HorizontalOptions="Center"/>
    
     <Label Text="{Binding PitEntry.Timestamp, StringFormat='Last updated: {0:g}'}"
         FontSize="14"
      HorizontalOptions="Center"
             Opacity="0.7"/>
            
      <Label Text="{Binding StatusMessage}"
 FontSize="14"
       HorizontalTextAlignment="Center"
  IsVisible="{Binding StatusMessage, Converter={StaticResource StringToBoolConverter}}"
          Margin="0,8,0,0"/>

         <ActivityIndicator IsRunning="{Binding IsLoading}"
 IsVisible="{Binding IsLoading}"
        Color="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource Primary}}"
        Margin="0,8,0,0"/>
     </VerticalStackLayout>

        <!-- Form Container (ScrollView) -->
   <ScrollView Grid.Row="1" Margin="0,16,0,0">
            <VerticalStackLayout x:Name="FormContainer" Spacing="8"/>
     </ScrollView>

        <!-- Action Buttons -->
      <Grid Grid.Row="2" 
            ColumnDefinitions="*,*,*"
ColumnSpacing="8"
    Margin="0,16,0,0">
      
        <!-- Save Button -->
        <Button Grid.Column="0"
     Text="Save"
            Command="{Binding SaveCommand}"
           IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}"
     Style="{StaticResource PrimaryButton}"
      BackgroundColor="{StaticResource SuccessColor}">
          <Button.Triggers>
            <DataTrigger TargetType="Button" Binding="{Binding IsEditMode}" Value="False">
              <Setter Property="IsEnabled" Value="False" />
              <Setter Property="Text" Value="Update on server" />
              <Setter Property="BackgroundColor" Value="#BDBDBD" />
            </DataTrigger>
          </Button.Triggers>
        </Button>
        
     <!-- Delete Button -->
    <Button Grid.Column="1"
  Text="Delete"
    Command="{Binding DeleteCommand}"
  IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}"
           Style="{StaticResource PrimaryButton}"
          BackgroundColor="{StaticResource ErrorColor}"/>
         
   <!-- Cancel Button -->
  <Button Grid.Column="2"
          Text="Cancel"
         Command="{Binding CancelCommand}"
     IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}"
          Style="{StaticResource SecondaryButton}"/>
        </Grid>
    </Grid>
</ContentPage>
