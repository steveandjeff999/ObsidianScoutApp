<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:viewmodels="clr-namespace:ObsidianScout.ViewModels"
    x:Class="ObsidianScout.MainPage"
    x:DataType="viewmodels:MainViewModel"
    Title="Home">

    <ScrollView>
   <VerticalStackLayout Padding="20" Spacing="20">

            <!-- Hero Section -->
     <Border Padding="24" 
       Shadow="{StaticResource ShadowLg}"
       BackgroundColor="{AppThemeBinding Light={StaticResource LightPrimary}, Dark={StaticResource DarkPrimary}}">
       <Border.StrokeShape>
        <RoundRectangle CornerRadius="20" />
    </Border.StrokeShape>
    

        <Grid RowDefinitions="Auto,Auto,Auto" RowSpacing="20">

           <!-- Logo and Brand -->
    <VerticalStackLayout Grid.Row="0" Spacing="16" HorizontalOptions="Center">
                 <Border 
        BackgroundColor="{AppThemeBinding Light=#1A000000, Dark=#1AFFFFFF}"
       WidthRequest="72"
     HeightRequest="72"
   HorizontalOptions="Center">
    <Border.StrokeShape>
         <RoundRectangle CornerRadius="18" />
       </Border.StrokeShape>
     <Border.StrokeThickness>0</Border.StrokeThickness>
    <Label Text="OS"
         FontSize="32"
           FontFamily="OpenSansSemibold"
       FontAttributes="Bold"
      TextColor="White"
           HorizontalOptions="Center"
         VerticalOptions="Center" />
            </Border>

     <VerticalStackLayout Spacing="4">
         <Label Text="ObsidianScout"
             FontSize="28"
                FontFamily="OpenSansSemibold"
 FontAttributes="Bold"
         TextColor="White"
      HorizontalTextAlignment="Center" />
     <Label Text="FRC Scouting Platform"
    FontSize="14"
            TextColor="White"
  Opacity="0.85"
      HorizontalTextAlignment="Center" />
            </VerticalStackLayout>
    </VerticalStackLayout>

    <!-- User Welcome Badge -->
    <Border Grid.Row="1"
           BackgroundColor="{AppThemeBinding Light=#1A000000, Dark=#1AFFFFFF}"
          Padding="16,12"
            HorizontalOptions="Center"
 IsVisible="{Binding CurrentUser, Converter={StaticResource IsNotNullConverter}}">
        <Border.StrokeShape>
         <RoundRectangle CornerRadius="24" />
        </Border.StrokeShape>
          <Border.StrokeThickness>0</Border.StrokeThickness>
           <HorizontalStackLayout Spacing="12">
      <Border 
          BackgroundColor="White"
             WidthRequest="36"
       HeightRequest="36"
  VerticalOptions="Center">
     <Border.StrokeShape>
 <RoundRectangle CornerRadius="18" />
             </Border.StrokeShape>
        <Border.StrokeThickness>0</Border.StrokeThickness>
         <Image Source="{StaticResource IconUser}" WidthRequest="16" HeightRequest="16" HorizontalOptions="Center" VerticalOptions="Center" Aspect="AspectFit" />
          </Border>
          <VerticalStackLayout Spacing="2">
      <Label Text="{Binding WelcomeMessage}"
         FontSize="15"
 FontFamily="OpenSansSemibold"
       TextColor="White" />
          <Label Text="{Binding CurrentUser.TeamNumber, StringFormat='Team {0}'}"
                FontSize="12"
         TextColor="White"
           Opacity="0.8" />
  </VerticalStackLayout>
   </HorizontalStackLayout>
        </Border>

    <!-- Stats Row -->
    <Grid Grid.Row="2"
      ColumnDefinitions="*,*,*"
         ColumnSpacing="12"
      IsVisible="{Binding CurrentUser, Converter={StaticResource IsNotNullConverter}}">

  <!-- Current Event -->
        <Border Grid.Column="0" 
 BackgroundColor="{AppThemeBinding Light=#1A000000, Dark=#1AFFFFFF}"
           Padding="12,10">
      <Border.StrokeShape>
     <RoundRectangle CornerRadius="12" />
   </Border.StrokeShape>
      <Border.StrokeThickness>0</Border.StrokeThickness>
        <VerticalStackLayout Spacing="4">
     <Label Text="EVENT"
           FontSize="10"
            FontFamily="OpenSansSemibold"
      CharacterSpacing="1"
           TextColor="White"
         Opacity="0.7"
     HorizontalTextAlignment="Center" />
          <Label Text="{Binding CurrentEventName}"
         FontSize="13"
        FontFamily="OpenSansSemibold"
        TextColor="White"
    HorizontalTextAlignment="Center"
     LineBreakMode="TailTruncation" />
        </VerticalStackLayout>
       </Border>

     <!-- Teams Count -->
     <Border Grid.Column="1" 
        BackgroundColor="{AppThemeBinding Light=#1A000000, Dark=#1AFFFFFF}"
Padding="12,10">
      <Border.StrokeShape>
   <RoundRectangle CornerRadius="12" />
   </Border.StrokeShape>
           <Border.StrokeThickness>0</Border.StrokeThickness>
<VerticalStackLayout Spacing="4">
              <Label Text="TEAMS"
        FontSize="10"
     FontFamily="OpenSansSemibold"
        CharacterSpacing="1"
     TextColor="White"
    Opacity="0.7"
    HorizontalTextAlignment="Center" />
   <Label Text="{Binding TeamCount}"
           FontSize="20"
      FontFamily="OpenSansSemibold"
      TextColor="White"
          HorizontalTextAlignment="Center" />
       </VerticalStackLayout>
  </Border>

       <!-- Matches Count -->
      <Border Grid.Column="2" 
     BackgroundColor="{AppThemeBinding Light=#1A000000, Dark=#1AFFFFFF}"
         Padding="12,10">
      <Border.StrokeShape>
        <RoundRectangle CornerRadius="12" />
          </Border.StrokeShape>
  <Border.StrokeThickness>0</Border.StrokeThickness>
       <VerticalStackLayout Spacing="4">
                  <Label Text="MATCHES"
      FontSize="10"
      FontFamily="OpenSansSemibold"
             CharacterSpacing="1"
         TextColor="White"
     Opacity="0.7"
       HorizontalTextAlignment="Center" />
          <Label Text="{Binding MatchCount}"
    FontSize="20"
         FontFamily="OpenSansSemibold"
            TextColor="White"
     HorizontalTextAlignment="Center" />
          </VerticalStackLayout>
          </Border>
       </Grid>
       </Grid>
         </Border>

    <!-- Quick Actions Section -->
            <Label Text="QUICK ACTIONS"
          Style="{StaticResource SectionHeader}" />

 <!-- Action Cards Grid -->
         <Grid RowDefinitions="Auto,Auto" 
               ColumnDefinitions="*,*"
  RowSpacing="12"
     ColumnSpacing="12">

         <!-- Scout Match Card -->
       <Border Grid.Row="0" Grid.Column="0"
 Style="{StaticResource GlassCard}"
     Padding="16">
            <Border.GestureRecognizers>
        <TapGestureRecognizer Command="{Binding NavigateToScoutingCommand}" />
        </Border.GestureRecognizers>

        <VerticalStackLayout Spacing="12">
    <Border BackgroundColor="{AppThemeBinding Light={StaticResource LightPrimaryDark}, Dark={StaticResource DarkPrimaryDark}}"
            WidthRequest="48"
               HeightRequest="48"
        HorizontalOptions="Start">
       <Border.StrokeShape>
          <RoundRectangle CornerRadius="12" />
       </Border.StrokeShape>
       <Border.StrokeThickness>0</Border.StrokeThickness>
        <Image Source="{StaticResource IconClipboard}" WidthRequest="22" HeightRequest="22" HorizontalOptions="Center" VerticalOptions="Center" Aspect="AspectFit" />
         </Border>
         <VerticalStackLayout Spacing="4">
     <Label Text="Scout Match"
     Style="{StaticResource SubheaderLabel}"
        FontSize="16" />
        <Label Text="Record match data"
            Style="{StaticResource CaptionLabel}"
                 FontSize="12" />
    </VerticalStackLayout>
                </VerticalStackLayout>
                </Border>

          <!-- View Teams Card -->
      <Border Grid.Row="0" Grid.Column="1"
                  Style="{StaticResource GlassCard}"
          Padding="16">
         <Border.GestureRecognizers>
    <TapGestureRecognizer Command="{Binding NavigateToTeamsCommand}" />
      </Border.GestureRecognizers>

    <VerticalStackLayout Spacing="12">
    <Border BackgroundColor="{AppThemeBinding Light={StaticResource LightSecondary}, Dark={StaticResource DarkSecondary}}"
        WidthRequest="48"
            HeightRequest="48"
      HorizontalOptions="Start">
            <Border.StrokeShape>
<RoundRectangle CornerRadius="12" />
        </Border.StrokeShape>
             <Border.StrokeThickness>0</Border.StrokeThickness>
           <Image Source="{StaticResource IconTeams}" WidthRequest="22" HeightRequest="22" HorizontalOptions="Center" VerticalOptions="Center" Aspect="AspectFit" />
     </Border>
       <VerticalStackLayout Spacing="4">
      <Label Text="Teams"
       Style="{StaticResource SubheaderLabel}"
         FontSize="16" />
   <Label Text="Browse team list"
      Style="{StaticResource CaptionLabel}"
       FontSize="12" />
               </VerticalStackLayout>
     </VerticalStackLayout>
        </Border>

    <!-- Events Card (Full Width) -->
        <Border Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
  Style="{StaticResource GlassCard}"
    Padding="16">
       <Border.GestureRecognizers>
             <TapGestureRecognizer Command="{Binding NavigateToEventsCommand}" />
      </Border.GestureRecognizers>

     <HorizontalStackLayout Spacing="16">
     <Border BackgroundColor="{AppThemeBinding Light={StaticResource LightTertiary}, Dark={StaticResource DarkTertiary}}"
    WidthRequest="48"
           HeightRequest="48"
   VerticalOptions="Center">
       <Border.StrokeShape>
 <RoundRectangle CornerRadius="12" />
          </Border.StrokeShape>
           <Border.StrokeThickness>0</Border.StrokeThickness>
   <Image Source="{StaticResource IconEvents}" WidthRequest="22" HeightRequest="22" HorizontalOptions="Center" VerticalOptions="Center" Aspect="AspectFit" />
  </Border>
     <VerticalStackLayout Spacing="4" VerticalOptions="Center">
   <Label Text="Events"
     Style="{StaticResource SubheaderLabel}"
          FontSize="17" />
               <Label Text="View competition events and schedules"
       Style="{StaticResource CaptionLabel}"
   FontSize="13" />
              </VerticalStackLayout>
         </HorizontalStackLayout>
       </Border>
        </Grid>

       <!-- Info Card -->
    <Border 
Style="{StaticResource CompactGlassCard}"
      BackgroundColor="{AppThemeBinding Light={StaticResource LightInfoBg}, Dark={StaticResource DarkInfoBg}}"
           Stroke="{AppThemeBinding Light={StaticResource LightInfo}, Dark={StaticResource DarkInfo}}"
     StrokeThickness="1">
                <HorizontalStackLayout Spacing="12">
      <Border 
 BackgroundColor="{AppThemeBinding Light={StaticResource LightInfo}, Dark={StaticResource DarkInfo}}"
        WidthRequest="36"
       HeightRequest="36"
                VerticalOptions="Start">
                <Border.StrokeShape>
    <RoundRectangle CornerRadius="10" />
         </Border.StrokeShape>
         <Border.StrokeThickness>0</Border.StrokeThickness>
      <Image Source="{StaticResource IconLightbulb}" WidthRequest="18" HeightRequest="18" HorizontalOptions="Center" VerticalOptions="Center" Aspect="AspectFit" />
       </Border>
             <VerticalStackLayout Spacing="4" VerticalOptions="Center">
    <Label Text="Navigation Tip"
      FontSize="14"
           FontFamily="OpenSansSemibold"
      TextColor="{AppThemeBinding Light={StaticResource LightInfo}, Dark={StaticResource DarkInfo}}" />
                <HorizontalStackLayout Spacing="8" VerticalOptions="Center">
                  <Image Source="{StaticResource IconMenu}" WidthRequest="16" HeightRequest="16" VerticalOptions="Center" Aspect="AspectFit" />
                  <Label Text="Use the menu in the top left to access all features"
                         FontSize="13"
                         TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"
                         LineBreakMode="WordWrap" />
                </HorizontalStackLayout>
                    </VerticalStackLayout>
 </HorizontalStackLayout>
            </Border>

   <!-- Bottom Spacing -->
            <BoxView HeightRequest="20" BackgroundColor="Transparent" />

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
