# Match Notification Deep Linking - Visual Guide

## ?? User Journey

```
???????????????????????????????????????????????????
?  ?? USER'S PHONE  ?
?   ?
?  ?? Notification appears:            ?
?  ????????????????????????????????????????????  ?
?  ? Match Reminder    ?  ?
?  ? Match starting in 15 minutes!       ?  ?
?  ? 2024casj - Match #42 ?  ?
?  ????????????????????????????????????????????  ?
?     ?
?  ?? User taps notification...       ?
???????????????????????????????????????????????????
   ?
???????????????????????????????????????????????????
?  ?? APP OPENS       ?
?       ?
?  [Loading screen]         ?
?  ObsidianScout starting...      ?
?    ?
?  (If not logged in: login screen appears)       ?
???????????????????????????????????????????????????
     ?
???????????????????????????????????????????????????
?  ?? MATCH PREDICTION PAGE          ?
?                    ?
?  ?? Match Prediction     ?
?  ??????????????????????????????????????????
?       ?
?  Event: [2024 San Jose Regional ?]  ?          ?
?  Match: [Qualification 42 ?]    ?          ?
?   ?
?  Status: ?? Opened from notification - Match 42 ?
??
?  ?????????????????????????????????????????     ?
?  ?  RED ALLIANCE  vs    BLUE ALLIANCE  ?     ?
?  ?     ?     ?
?  ?     245 pts  198 pts        ?     ?
?  ?     65% win            35% win     ?     ?
?  ?      ?     ?
?  ?  Teams: 254, 973, 1678   ?     ?
?  ?  Teams: 1323, 2056, 4419             ?     ?
?  ?????????????????????????????????????????  ?
? ?
?  [Predict Match]  [Share] ?
???????????????????????????????????????????????????
```

## ?? Behind The Scenes

```
????????????????
? Notification ?
?   Tapped     ?
????????????????
       ?
       ?
???????????????????????????????????????????????
? MainActivity.OnNewIntent()     ?
?          ?
? Intent extras:         ?
?  • type = "match"      ?
?  • eventId = "123"       ?
?  • eventCode = "2024casj"             ?
?  • matchNumber = "42"       ?
???????????????????????????????????????????????
       ?
       ?
???????????????????????????????????????????????
? Build Navigation URI     ?
?           ?
? "MatchPredictionPage?eventId=123   ?
?  &eventCode=2024casj&matchNumber=42"      ?
?    ?
? Store as pending navigation              ?
???????????????????????????????????????????????
       ?
       ?
???????????????????????????????????????????????
? App Initializes   ?
?          ?
? • Check auth status           ?
? • Require login if needed      ?
? • Wait for Shell to be ready     ?
???????????????????????????????????????????????
       ?
       ?
???????????????????????????????????????????????
? AppShell.CheckAndExecutePendingNavigation() ?
?  ?
? Execute: Shell.GoToAsync(navUri) ?
???????????????????????????????????????????????
       ?
       ?
???????????????????????????????????????????????
? MatchPredictionViewModel     ?
?     ?
? EventId property set ? "123"       ?
? EventCode property set ? "2024casj"       ?
? MatchNumber property set ? "42"             ?
?          ?
? Triggers: HandleDeepLinkAsync()   ?
???????????????????????????????????????????????
       ?
       ?
???????????????????????????????????????????????
? HandleDeepLinkAsync()   ?
?    ?
? 1. Wait for events to load      ?
? 2. Find event with ID = 123 ?
? 3. Set SelectedEvent  ?
? 4. Wait for matches to load      ?
? 5. Find match with number = 42              ?
? 6. Set SelectedMatch     ?
? 7. Run PredictMatchAsync()            ?
? 8. Set status: "?? Opened from notification"?
???????????????????????????????????????????????
 ?
       ?
???????????????????????????????????????????????
? PredictMatchAsync()          ?
?             ?
? • Fetch team historical data      ?
? • Calculate predictions        ?
? • Calculate win probabilities         ?
? • Display results         ?
???????????????????????????????????????????????
       ?
    ?
???????????????????????????????????????????????
? ? USER SEES PREDICTION RESULTS    ?
???????????????????????????????????????????????
```

## ?? Comparison: Before vs After

### BEFORE (Manual Navigation)
```
1. Tap notification
2. App opens to main page
3. Navigate to Match Prediction
4. Select event dropdown
5. Scroll to find event
6. Select event
7. Wait for matches to load
8. Select match dropdown
9. Scroll to find match
10. Select match
11. Tap "Predict Match" button
12. Wait for prediction
13. See results

Total: 13 steps, ~45 seconds
```

### AFTER (Deep Linking)
```
1. Tap notification
2. See results

Total: 2 steps, ~3 seconds ?
```

## ?? Architecture Diagram

```
???????????????????????????????????????????????????????
?        NOTIFICATION SYSTEM          ?
?  ?
?  ?????????????????????????????????????????????? ?
?  ?  BackgroundNotificationService        ?    ?
?  ?  ?    ?
?  ?  • Polls server for notifications          ?    ?
?  ?  • Creates local notifications      ?    ?
?  ?  • Includes deep link data:      ?    ?
?  ?    - type: "match"          ? ?
?  ?    - eventId: 123?    ?
?  ?    - matchNumber: 42   ?    ?
?  ??????????????????????????????????????????????    ?
?      ?            ?
?               ?    ?
?  ??????????????????????????????????????????????    ?
?  ?  LocalNotificationService (Android)        ?    ?
?  ?       ?    ?
?  ?  • Shows notification with PendingIntent   ?    ?
?  ?  • Intent contains deep link data       ?    ?
?  ??????????????????????????????????????????????    ?
????????????????????????????????????????????????????????
   ?
 ? (User taps notification)
????????????????????????????????????????????????????????
?       NAVIGATION SYSTEM             ?
?         ?
?  ??????????????????????????????????????????????    ?
?  ?  MainActivity           ?    ?
?  ?               ?    ?
?  ?  • OnNewIntent() receives intent           ?    ?
?  ?  • Extracts: type, eventId, matchNumber    ?    ?
?  ?  • Builds navigation URI           ?    ?
?  ?  • Stores pending navigation        ?    ?
?  ??????????????????????????????????????????????    ?
?               ?     ?
? ?        ?
?  ??????????????????????????????????????????????    ?
?  ?  AppShell        ?    ?
?  ?          ?    ?
?  ?  • Checks for pending navigation  ?    ?
?  ?  • Waits for auth + initialization         ?    ?
?  ?  • Executes: GoToAsync(navUri)             ?    ?
?  ??????????????????????????????????????????????    ?
????????????????????????????????????????????????????????
  ?
      ? (Shell navigation)
????????????????????????????????????????????????????????
?            PREDICTION SYSTEM       ?
?             ?
?  ??????????????????????????????????????????????    ?
?  ?  MatchPredictionPage            ?    ?
?  ?                  ?    ?
?  ?  • Receives query parameters         ?    ?
?  ?  • Passes to ViewModel    ?    ?
?  ??????????????????????????????????????????????    ?
?   ?    ?
?     ?      ?
?  ??????????????????????????????????????????????    ?
?  ?  MatchPredictionViewModel              ? ?
?  ?   ?    ?
?  ?  • QueryProperty: EventId, MatchNumber     ?    ?
??  • HandleDeepLinkAsync():      ?    ?
??    1. Find and select event      ?    ?
?  ?    2. Find and select match             ?    ?
?  ?    3. Run prediction     ?    ?
?  ?  • PredictMatchAsync():        ?    ?
?  ?    - Fetch team stats ?    ?
?  ? - Calculate predictions     ?    ?
?  ?    - Show results            ?    ?
?  ??????????????????????????????????????????????    ?
????????????????????????????????????????????????????????
       ?
     ?
           ? USER SEES RESULTS ?
```

## ?? Notification Types Routing

```
Notification Tap
 ?
       ???? type="chat" ??????? ChatPage?sourceType=dm&sourceId=username
       ?       (Chat deep linking - already exists)
       ?
       ???? type="match" ?????? MatchPredictionPage?eventId=123&matchNumber=42
   (NEW: Match deep linking)
```

## ?? Authentication Flow

```
Notification Tap
       ?
   ?
Is user logged in?
       ?
       ???? Yes ??? Navigate immediately
       ?
       ???? No ???? Show LoginPage
      ?
 ?
          User logs in
          ?
           ?
     Execute pending navigation
       ?
        ?
             Navigate to MatchPredictionPage
```

## ? Status Messages

```
???????????????????????????????????????????
? Scenario     ? Status Message      ?
???????????????????????????????????????????
? Deep link successful    ? "?? Opened from notification - Match 42" ?
? Event not found   ? "Could not find event (ID: 123)"       ?
? Match not found    ? "Match 42 selected - tap 'Predict..'"  ?
? Loading events          ? "Loading events..."     ?
? Loading matches         ? "Loading matches..."       ?
? Running prediction      ? "Analyzing team data..."         ?
? Prediction complete     ? "Prediction complete! Red 65% vs..."    ?
???????????????????????????????????????????
```

## ?? Key Benefits Visualized

```
????????????????         ????????????????
? Traditional  ?    ? Deep Linking ?
?  Navigation  ?         ?   (NEW!)     ?
????????????????     ????????????????
       ?       ?
       ?                ?
  13 steps  2 steps
  45 seconds 3 seconds
  High friction       Zero friction
  Easy to forget     Instant context
       ?       ?
```

---

**This is what makes notifications truly useful!** ??
