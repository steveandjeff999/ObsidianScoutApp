# Match Prediction - Visual Flow Diagram

## User Interface Flow

```
???????????????????????????????????????????????????????????????
?                    ?? Match Prediction                       ?
?                                                              ?
?  Select a match to predict scores based on team data        ?
???????????????????????????????????????????????????????????????
                           ?
???????????????????????????????????????????????????????????????
?  ?? Event                                                    ?
?  ??????????????????????????????????????????????????????    ?
?  ?  Colorado Regional                              ?  ?    ?
?  ??????????????????????????????????????????????????????    ?
???????????????????????????????????????????????????????????????
                           ?
???????????????????????????????????????????????????????????????
?  ?? Match                                                    ?
?  ??????????????????????????????????????????????????????    ?
?  ?  Qualification Match 15                         ?  ?    ?
?  ??????????????????????????????????????????????????????    ?
?                                                              ?
?  Match Teams:                                                ?
?  ?? Red: 5454, 1234, 5678                                   ?
?  ?? Blue: 9999, 2222, 3333                                  ?
???????????????????????????????????????????????????????????????
                           ?
???????????????????????????????????????????????????????????????
?        [ ?? Predict Match Outcome ]                         ?
???????????????????????????????????????????????????????????????
                           ?
                    ? Analyzing...
                           ?
???????????????????????????????????????????????????????????????
?            ?? Win Probability                                ?
?                                                              ?
?  ?? Red Alliance                               62%          ?
?  ???????????????????????????????                           ?
?                                                              ?
?  ?? Blue Alliance                              38%          ?
?  ??????????????????????????????                           ?
???????????????????????????????????????????????????????????????
                           ?
???????????????????????????????????????????????????????????????
?            ?? Predicted Scores                               ?
?                                                              ?
?  Alliance ?  Auto  ? Teleop ? Endgame ?  Total              ?
?  ??????????????????????????????????????????????             ?
?  ?? Red   ?   25   ?   85   ?   30    ?  140                ?
?  ?? Blue  ?   30   ?   75   ?   28    ?  133                ?
???????????????????????????????????????????????????????????????
                           ?
???????????????????????????????????????????????????????????????
?        ?? Red Alliance Team Breakdown                        ?
?  ????????????????????????????????????????????????????       ?
?  ?  Team 5454 - The Bionics                         ?       ?
?  ?  Auto: 10  ? Teleop: 40 ? Endgame: 12 ? Total: 62?       ?
?  ?  ?? 12 matches  ?? 87% consistent                 ?       ?
?  ????????????????????????????????????????????????????       ?
?  ????????????????????????????????????????????????????       ?
?  ?  Team 1234 - Team Name                           ?       ?
?  ?  Auto: 8   ? Teleop: 25 ? Endgame: 10 ? Total: 43?       ?
?  ?  ?? 11 matches  ?? 82% consistent                 ?       ?
?  ????????????????????????????????????????????????????       ?
?  ????????????????????????????????????????????????????       ?
?  ?  Team 5678 - Another Team                        ?       ?
?  ?  Auto: 7   ? Teleop: 20 ? Endgame: 8  ? Total: 35?       ?
?  ?  ?? 10 matches  ?? 79% consistent                 ?       ?
?  ????????????????????????????????????????????????????       ?
???????????????????????????????????????????????????????????????
                           ?
???????????????????????????????????????????????????????????????
?        ?? Blue Alliance Team Breakdown                       ?
?  [Similar layout for blue teams...]                         ?
???????????????????????????????????????????????????????????????
```

## Data Flow Architecture

```
????????????????
?   User UI    ?
????????????????
       ? 1. Select Event & Match
       ?
????????????????????????
?  ViewModel           ?
?  ??????????????????  ?
?  ? InitializeAsync?  ? 2. Load game config, events
?  ??????????????????  ?
?  ??????????????????  ?
?  ? LoadMatchesAsync? ? 3. Load matches for event
?  ??????????????????  ?
?  ??????????????????  ?
?  ?PredictMatchAsync? ? 4. Run prediction
?  ??????????????????  ?
????????????????????????
       ?
       ?
???????????????????????????????????????????
?  Prediction Algorithm                    ?
?  ?????????????????????????????????????? ?
?  ? 1. Parse team numbers from match  ? ?
?  ?????????????????????????????????????? ?
?           ?                              ?
?  ?????????????????????????????????????? ?
?  ? 2. For each team (6 total):       ? ?
?  ?    - Fetch scouting entries       ? ?
?  ?    - Calculate Auto points        ? ?
?  ?    - Calculate Teleop points      ? ?
?  ?    - Calculate Endgame points     ? ?
?  ?    - Compute mean & std dev       ? ?
?  ?????????????????????????????????????? ?
?           ?                              ?
?  ?????????????????????????????????????? ?
?  ? 3. Build team predictions         ? ?
?  ?    - Create TeamMatchPrediction   ? ?
?  ?    - Store stats & metadata       ? ?
?  ?????????????????????????????????????? ?
?           ?                              ?
?  ?????????????????????????????????????? ?
?  ? 4. Aggregate by alliance          ? ?
?  ?    - Sum all team predictions     ? ?
?  ?    - Calculate combined variance  ? ?
?  ?????????????????????????????????????? ?
?           ?                              ?
?  ?????????????????????????????????????? ?
?  ? 5. Calculate win probability      ? ?
?  ?    scoreDiff = Red - Blue         ? ?
?  ?    zScore = diff / stdDev         ? ?
?  ?    P(win) = NormalCDF(zScore)     ? ?
?  ?????????????????????????????????????? ?
?           ?                              ?
?  ?????????????????????????????????????? ?
?  ? 6. Build MatchPrediction object   ? ?
?  ?????????????????????????????????????? ?
???????????????????????????????????????????
       ?
????????????????
?  Display UI  ?
????????????????
```

## API Call Sequence

```
User Action          ViewModel               API Service              Backend
    ?                    ?                        ?                      ?
    ?  Open Page         ?                        ?                      ?
    ??????????????????????                        ?                      ?
    ?                    ?  GetGameConfigAsync    ?                      ?
    ?                    ??????????????????????????  GET /config/game   ?
    ?                    ?                        ????????????????????????
    ?                    ?                        ????????????????????????
    ?                    ??????????????????????????  GameConfig          ?
    ?                    ?                        ?                      ?
    ?                    ?  GetEventsAsync        ?                      ?
    ?                    ??????????????????????????  GET /events         ?
    ?                    ?                        ????????????????????????
    ?                    ?                        ????????????????????????
    ?                    ??????????????????????????  Events[]            ?
    ?                    ?                        ?                      ?
    ?  Select Event      ?                        ?                      ?
    ??????????????????????                        ?                      ?
    ?                    ?  GetMatchesAsync       ?                      ?
    ?                    ??????????????????????????  GET /matches?event_id ?
    ?                    ?                        ????????????????????????
    ?                    ?                        ????????????????????????
    ?                    ??????????????????????????  Matches[]           ?
    ?                    ?                        ?                      ?
    ?  Select Match      ?                        ?                      ?
    ??????????????????????                        ?                      ?
    ?                    ?                        ?                      ?
    ?  Click Predict     ?                        ?                      ?
    ??????????????????????                        ?                      ?
    ?                    ?  Parse Teams           ?                      ?
    ?                    ?  (5454,1234,5678,      ?                      ?
    ?                    ?   9999,2222,3333)      ?                      ?
    ?                    ?                        ?                      ?
    ?                    ?  GetScoutingDataAsync  ?                      ?
    ?                    ?  (team 5454)           ?                      ?
    ?                    ??????????????????????????  GET /scouting/all?  ?
    ?                    ?                        ?  team_number=5454    ?
    ?                    ?                        ????????????????????????
    ?                    ?                        ????????????????????????
    ?                    ??????????????????????????  Entries[]           ?
    ?                    ?                        ?                      ?
    ?                    ?  [Repeat 5 more times for other teams]        ?
    ?                    ?                        ?                      ?
    ?                    ?  Calculate Statistics  ?                      ?
    ?                    ?  Build Predictions     ?                      ?
    ?                    ?  Compute Win Prob      ?                      ?
    ?                    ?                        ?                      ?
    ?  Display Results   ?                        ?                      ?
    ??????????????????????                        ?                      ?
    ?                    ?                        ?                      ?
```

## Point Calculation Logic

```
Scouting Entry Data
        ?
        ??? Auto Period
        ?   ??? For each scoring element:
        ?   ?   ??? Get value from data
        ?   ?   ??? Multiply by points per element
        ?   ?   ??? Add to auto total
        ?   ??? Return auto points
        ?
        ??? Teleop Period
        ?   ??? For each scoring element:
        ?   ?   ??? Get value from data
        ?   ?   ??? Multiply by points per element
        ?   ?   ??? Add to teleop total
        ?   ??? Return teleop points
        ?
        ??? Endgame Period
            ??? For each scoring element:
            ?   ??? If counter: value × points
            ?   ??? If boolean: points if true
            ?   ??? If choice: points from option
            ?   ??? Add to endgame total
            ??? Return endgame points
        
        Total Points = Auto + Teleop + Endgame
```

## Statistical Model Visualization

```
Team Historical Data:
[120, 130, 125, 122, 128, 132, 124, 120, 135, 125, 118, 127]
         ?
    Calculate Mean
         ?
    Average = 125.5
         ?
Calculate Std Dev
         ?
   StdDev = 5.2
         ?
  Consistency = 1 - (5.2/125.5) = 0.96 = 96%

Alliance Prediction:
Team A: 125.5 ± 5.2
Team B: 98.3 ± 7.1
Team C: 87.9 ± 6.8
         ?
Alliance Total: 311.7
Combined StdDev: ?(5.2² + 7.1² + 6.8²) = 11.2

Red Alliance: 311.7 ± 11.2
Blue Alliance: 285.3 ± 14.5
         ?
Score Difference: 311.7 - 285.3 = 26.4
Combined Variance: ?(11.2² + 14.5²) = 18.3
         ?
Z-Score: 26.4 / 18.3 = 1.44
         ?
P(Red Wins) = NormalCDF(1.44) = 0.925 = 92.5%
P(Blue Wins) = 1 - 0.925 = 0.075 = 7.5%
```

## Class Diagram

```
???????????????????????????????
?  MatchPredictionViewModel   ?
???????????????????????????????
? - _apiService               ?
? - _settingsService          ?
? - _gameConfig               ?
???????????????????????????????
? + IsLoading                 ?
? + StatusMessage             ?
? + Events                    ?
? + SelectedEvent             ?
? + Matches                   ?
? + SelectedMatch             ?
? + Prediction                ?
? + HasPrediction             ?
???????????????????????????????
? + InitializeAsync()         ?
? + PredictMatchAsync()       ?
? - LoadEventsAsync()         ?
? - LoadMatchesAsync()        ?
? - GetTeamHistoricalStats()  ?
? - CalculateAutoPoints()     ?
? - CalculateTeleopPoints()   ?
? - CalculateEndgamePoints()  ?
? - CalculateStdDev()         ?
? - NormalCDF()               ?
???????????????????????????????
         uses ?
???????????????????????????????
?    MatchPrediction          ?
???????????????????????????????
? + Match                     ?
? + RedAlliance               ???? List<TeamMatchPrediction>
? + BlueAlliance              ???? List<TeamMatchPrediction>
? + RedPredictedAutoPoints    ?
? + RedPredictedTeleopPoints  ?
? + RedPredictedEndgamePoints ?
? + RedPredictedTotalPoints   ?
? + BluePredictedAutoPoints   ?
? + BluePredictedTeleopPoints ?
? + BluePredictedEndgamePoints?
? + BluePredictedTotalPoints  ?
? + RedWinProbability         ?
? + BlueWinProbability        ?
? + HasSufficientData         ?
? + WarningMessage            ?
???????????????????????????????
                ?
                ???? contains
                       ?
???????????????????????????????
?   TeamMatchPrediction       ?
???????????????????????????????
? + TeamNumber                ?
? + TeamName                  ?
? + PredictedAutoPoints       ?
? + PredictedTeleopPoints     ?
? + PredictedEndgamePoints    ?
? + PredictedTotalPoints      ?
? + AutoPointsStd             ?
? + TeleopPointsStd           ?
? + EndgamePointsStd          ?
? + TotalPointsStd            ?
? + MatchCount                ?
? + Consistency               ?
? + Alliance                  ?
???????????????????????????????
```

## State Machine

```
       ???????????????
       ?   Initial   ?
       ???????????????
              ? Page Load
              ?
       ???????????????
       ? Loading     ???? LoadGameConfig()
       ? Events      ???? LoadEvents()
       ???????????????
              ? Success
              ?
       ???????????????
       ? Event       ?
       ? Selection   ?
       ???????????????
              ? Event Selected
              ?
       ???????????????
       ? Loading     ???? LoadMatches()
       ? Matches     ?
       ???????????????
              ? Success
              ?
       ???????????????
       ? Match       ?
       ? Selection   ?
       ???????????????
              ? Match Selected
              ? User Clicks Predict
              ?
       ???????????????
       ? Analyzing   ???? Fetch team data (6 API calls)
       ? Data        ???? Calculate statistics
       ?             ???? Build prediction
       ???????????????
              ? Success
              ?
       ???????????????
       ? Showing     ?
       ? Prediction  ?
       ???????????????
              ?
              ??? Select Different Match ? Back to Match Selection
              ??? Select Different Event ? Back to Event Selection
```

This visual guide provides diagrams and flowcharts to help understand the Match Prediction feature's architecture, data flow, and user experience.
